<html ng-app="app">

<head>
    <script src="/resources/lib/angular/angular.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="/resources/js/controllers/Books.js"></script>
    <script src="/resources/js/controllers/BookController.js"></script>
    <script src="/resources/js/services/BookFetcher.js"></script>
    <script src="/resources/js/services/BookUpdater.js"></script>
    <script src="/resources/js/app.js"></script>
    <script src="/resources/js/controllers/TableController.js"></script>
    <script src="/resources/bootstrap/js/bootstrap.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"/>
</head>

<body>
<div ng-controller="TableController as formController"
     style="width:90%; margin-bottom: 50px; margin-left:auto; margin-right:auto;">

    <div class="alert alert-info" style="width:400px;" ng-show="books.length > 0">
        We have books!
    </div>

    <button type="button" class="btn btn-default" ng-click="refresh()" style="margin-bottom: 10px"
            title="Refresh">
        <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
    </button>

    <table class="table table-bordered" ng-show="books.length > 0">
        <thead>
        <th>Id</th>
        <th>Title</th>
        <th>Author</th>
        <th></th>
        </thead>
        <tbody>
        <tr ng-repeat="book in books" ng-include="getTemplate(book)">
        </tr>
        </tbody>
    </table>

    <script type="text/ng-template" id="display">
        <td>{{book.id}}</td>
        <td>{{book.title}}</td>
        <td>{{book.author}}</td>
        <td>
            <button ng-click="editBook(book)">Edit</button>
        </td>
    </script>
    <script type="text/ng-template" id="edit">
        <td><input type="text" ng-model="selected.id" readonly="readonly"/></td>
        <td><input type="text" ng-model="selected.title"/></td>
        <td><input type="text" ng-model="selected.author"/></td>
        <td>
            <button ng-click="saveBook($index)">Save</button>
            <button ng-click="reset()">Cancel</button>
        </td>
    </script>
</div>
</body>
</html>